<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <main>
    <h1>Hello there!</h1>
    <button onclick="runTest()">Test API</button>

    <h2>Make new table</h2>
    <p>Table name:</p>
    <input type="text" id="tablename">
    <p>Table password (optional):</p>
    <input type="password" id="tablepwd">
    <button id="maketable">Create table</button>

    <script>
      const server = 'https://barrettj12-crud-app.herokuapp.com'

      // Get page elements
      nameInput = document.getElementById('tablename')
      pwdInput = document.getElementById('tablepwd')


      // API test
      async function runTest() {
        fetch(server + '/test')
          .then(resp => resp.json())
          .then(data => processMessage(data.message));
      }

      function processMessage(message) {
        fmessage = 'New message from server: "' + message + '"';
        alert(fmessage);
        console.log(fmessage);
      }


      // Make new table
      async function makeTable() {
        name = nameInput.value
        pwd = pwdInput.value

        fetch(server + '/maketable', {
          method: 'POST',
          body: JSON.stringify({
            'name': name,
            'pwd': pwd
          })
        })
          .then(resp => console.log(resp))
      }
    </script>
  </main>
</body>
</html>